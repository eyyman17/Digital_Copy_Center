import{j as e,r as t,u as G,a as le,L as W,b as k,c as ne,N as z,C as B,d as Z,B as oe,R as ie,e as F,f as de,g as ce}from"./vendor-DZaxXKX2.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();const K=({children:r})=>e.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:e.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-custom-blue to-custom-light-blue shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),e.jsx("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:e.jsx("div",{className:"max-w-md mx-auto",children:r})})]})}),H="/assets/esith_logo-BRWVs2G9.png",V="/assets/ims_logo-CZu9F6b4.png",me=()=>{var r;return(r=document.cookie.split("; ").find(i=>i.startsWith("csrftoken=")))==null?void 0:r.split("=")[1]},ue=async(r,i={})=>{const c={credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":me()}},a={...c,...i,headers:{...c.headers,...i.headers}};return fetch(r,a)},xe="http://localhost:8000",he=()=>{const[r,i]=t.useState(""),[s,c]=t.useState(""),[a,o]=t.useState({}),[d,N]=t.useState(!1),h=G(),y=j=>{switch(j){case"agent":h("/agent/dashboard");break;case"direction":h("/direction/dashboard");break;case"professor":h("/professors/document_submit/");break;default:o({global:"Type d'utilisateur non valide"})}},x=()=>!r||!s?(o({global:"Veuillez remplir tous les champs."}),!1):!0,w=async j=>{if(j.preventDefault(),!!x()){N(!0),o({});try{const n=await ue(`${xe}/accounts/login/`,{method:"POST",body:JSON.stringify({email:r,password:s})}),m=await n.json();console.log("Login response:",m),n.ok&&m.success?(localStorage.setItem("user",JSON.stringify({isAuthenticated:!0,role:m.user_type})),y(m.user_type)):o({global:m.error||"Erreur inattendue. Veuillez réessayer."})}catch{o({global:"Erreur de connexion au serveur."})}finally{N(!1)}}};return e.jsxs(K,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:H,alt:"Logo Esith",className:"h-24"})}),a.global&&e.jsx("div",{className:"alert alert-danger mb-4",children:a.global}),e.jsxs("form",{onSubmit:w,className:"space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"text",value:r,onChange:j=>i(j.target.value),className:"peer placeholder-transparent h-10 w-64 border-b-2 border-custom-blue text-gray-900 focus:outline-none focus:border-custom-yellow text-base",placeholder:"Adresse email"}),e.jsx("label",{htmlFor:"email",className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Adresse Email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:s,onChange:j=>c(j.target.value),className:"peer placeholder-transparent h-10 w-64 border-b-2 border-custom-blue text-gray-900 focus:outline-none focus:border-custom-yellow text-base",placeholder:"Mot de passe"}),e.jsx("label",{htmlFor:"password",className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Mot de Passe"})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("a",{href:"/accounts/password_reset/",className:"text-sm text-custom-teal hover:text-custom-teal",children:"Mot de passe oublié ?"})}),e.jsx("div",{className:"relative mt-4",children:e.jsx("button",{type:"submit",disabled:d,className:"bg-custom-yellow text-white rounded-md px-4 py-2 w-full hover:bg-custom-dark-blue focus:outline-none focus:ring-2 focus:ring-custom-yellow mb-10 disabled:opacity-50",children:d?"Connexion en cours...":"Se connecter"})}),e.jsx("div",{className:"flex",children:e.jsx("img",{className:"h-6"})}),e.jsx("div",{className:"absolute bottom-8 right-5",children:e.jsx("img",{src:V,alt:"Logo IMS",className:"h-20"})})]})]})},pe="http://localhost:8000",ge=()=>{const[r,i]=t.useState(""),[s,c]=t.useState(""),[a,o]=t.useState(""),[d,N]=t.useState(!1),h=x=>{x.preventDefault(),N(!0),fetch(`${pe}/accounts/password_reset/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":y()},body:JSON.stringify({email:r})}).then(async w=>{const j=await w.json();N(!1),w.ok?(c(j.message),i("")):o(j.error||"Une erreur inattendue s'est produite.")}).catch(()=>{N(!1),o("Erreur de connexion au serveur.")})},y=()=>{const x=document.cookie.split("; ").find(w=>w.startsWith("csrftoken"));return x?x.split("=")[1]:null};return e.jsxs(K,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:H,alt:"Logo Esith",className:"h-24"})}),s&&e.jsx("div",{className:"alert alert-success mb-4 p-4 bg-green-100 text-green-700 rounded-lg",children:s}),a&&e.jsx("div",{className:"alert alert-danger mb-4 p-4 bg-red-100 text-red-700 rounded-lg",children:a}),e.jsxs("form",{onSubmit:h,className:"space-y-6 text-gray-700 sm:text-lg sm:leading-7",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:r,onChange:x=>i(x.target.value),className:"peer placeholder-transparent h-12 w-full border-b-2 border-custom-blue text-gray-900 focus:outline-none focus:border-custom-yellow text-base transition duration-300 ease-in-out",placeholder:"Adresse email"}),e.jsx("label",{htmlFor:"email",className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Adresse Email"})]}),e.jsx("div",{className:"relative mt-6",children:e.jsx("button",{type:"submit",disabled:d,className:`bg-custom-yellow text-white rounded-md px-6 py-3 w-full transition duration-300 ease-in-out 
                            ${d?"opacity-50 cursor-not-allowed":"hover:bg-custom-dark-blue focus:outline-none focus:ring-2 focus:ring-custom-yellow"}`,children:d?"Envoi en cours...":"Envoyer le lien de réinitialisation"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"/accounts/login/",className:"text-sm text-custom-teal hover:text-custom-teal",children:"Retour à la connexion"})})]})]})},be="http://localhost:8000",fe=()=>{const{uid:r,token:i}=le(),[s,c]=t.useState(""),[a,o]=t.useState(""),[d,N]=t.useState(""),[h,y]=t.useState(""),[x,w]=t.useState(!1),j=async m=>{if(m.preventDefault(),!s||!a){y("Tous les champs sont requis.");return}if(s!==a){y("Les mots de passe ne correspondent pas.");return}w(!0);try{const v=await fetch(`${be}/accounts/password_reset_confirm/${r}/${i}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n()},body:JSON.stringify({new_password1:s,new_password2:a})}),g=await v.json();w(!1),v.ok?(N("Votre mot de passe a été réinitialisé avec succès! Vous pouvez maintenant vous connecter."),c(""),o("")):y(g.error||"Une erreur s'est produite.")}catch{w(!1),y("Une erreur s'est produite lors de la connexion au serveur.")}},n=()=>document.cookie.split("; ").find(m=>m.startsWith("csrftoken")).split("=")[1];return e.jsxs(K,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:H,alt:"Logo Esith",className:"h-24"})}),d&&e.jsx("div",{className:"alert alert-success mb-4 p-4 bg-green-100 text-green-700 rounded-lg",children:d}),h&&e.jsx("div",{className:"alert alert-danger mb-4 p-4 bg-red-100 text-red-700 rounded-lg",children:h}),e.jsxs("form",{onSubmit:j,className:"space-y-6 text-gray-700 sm:text-lg sm:leading-7",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{autoComplete:"off",id:"newPassword",name:"newPassword",type:"password",value:s,onChange:m=>c(m.target.value),className:"peer placeholder-transparent h-12 w-64 border-b-2 border-custom-blue text-gray-900 focus:outline-none focus:border-custom-yellow text-base transition duration-300 ease-in-out",placeholder:"Nouveau mot de passe"}),e.jsx("label",{htmlFor:"newPassword",className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Nouveau Mot de Passe"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{autoComplete:"off",id:"confirmPassword",name:"confirmPassword",type:"password",value:a,onChange:m=>o(m.target.value),className:"peer placeholder-transparent h-12 w-64 border-b-2 border-custom-blue text-gray-900 focus:outline-none focus:border-custom-yellow text-base transition duration-300 ease-in-out",placeholder:"Confirmer le mot de passe"}),e.jsx("label",{htmlFor:"confirmPassword",className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Confirmer Mot de Passe"})]}),e.jsx("div",{className:"relative mt-6",children:e.jsx("button",{type:"submit",disabled:x,className:`bg-custom-yellow text-white rounded-md px-6 py-3 w-full transition duration-300 ease-in-out 
                            ${x?"opacity-50 cursor-not-allowed":"hover:bg-custom-dark-blue focus:outline-none focus:ring-2 focus:ring-custom-yellow"}`,children:x?"Réinitialisation en cours...":"Réinitialiser le mot de passe"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"/accounts/login/",className:"text-sm text-custom-teal hover:text-custom-teal",children:"Retour à la connexion"})})]})]})};function M(){const r=document.cookie.split(";");for(const i of r){const[s,c]=i.trim().split("=");if(s==="csrftoken")return c}return null}const ye="http://localhost:8000",se=()=>{const[r,i]=t.useState(!1),s=G(),c=async()=>{try{const a=M();if(!a)throw new Error("CSRF token not found");const o=await k.post(`${ye}/accounts/logout/`,{},{headers:{"X-CSRFToken":a},withCredentials:!0});o.data.success?s("/accounts/login/"):(console.error("Unexpected response during logout:",o.data),alert("Logout failed. Please try again."))}catch(a){console.error("Error during logout:",a),alert("An error occurred while logging out. Please try again.")}};return e.jsxs("nav",{className:"relative overflow-hidden rounded-xl border",style:{borderColor:"#b0cbd4"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to right, #04527a, #2c7494)",backdropFilter:"blur(10px)"}}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute h-4 w-4 rounded-full bg-[#c3d404]/20 animate-float top-4 left-[10%]"}),e.jsx("div",{className:"absolute h-3 w-3 rounded-full bg-[#7dcf44]/20 animate-float top-8 left-[20%] [animation-delay:0.5s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#407c9c]/20 animate-float top-6 left-[50%] [animation-delay:1s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#78a8bc]/20 animate-float top-2 left-[60%] [animation-delay:1.5s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#04527a]/20 animate-float top-10 left-[15%] [animation-delay:0.8s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#2c7494]/20 animate-float top-16 left-[70%] [animation-delay:1.2s]"}),e.jsx("div",{className:"absolute h-3 w-3 rounded-full bg-[#b0cbd4]/20 animate-float top-12 left-[30%] [animation-delay:0.4s]"}),e.jsx("div",{className:"absolute h-4 w-4 rounded-full bg-[#346e8e]/20 animate-float top-6 left-[85%] [animation-delay:0.7s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#042454]/20 animate-float top-14 left-[80%] [animation-delay:1.4s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#043261]/20 animate-float top-4 left-[40%] [animation-delay:1s]"})]}),e.jsxs("div",{className:"relative px-4 sm:px-8 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-10 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-lg blur-md group-hover:blur-xl transition-all duration-300",style:{background:"linear-gradient(to right, #c3d404, #7dcf44)"}}),e.jsx("img",{src:H,alt:"Logo Esith",className:"relative w-8 sm:w-16 h-8 sm:h-10 transform group-hover:scale-110 transition-transform duration-300"})]}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:"Portail des Professeurs"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-10",children:[e.jsxs(W,{to:"/professors/document_submit/",className:"relative group",style:{color:"#b0cbd4"},children:[e.jsx("span",{className:"group-hover:text-[#c3d404] transition-colors duration-300",children:"Formulaire de Commande"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 group-hover:w-full transition-all duration-300",style:{background:"linear-gradient(to right, #7dcf44, #c3d404)"}})]}),e.jsxs(W,{to:"/professors/document_history/",className:"relative group",style:{color:"#b0cbd4"},children:[e.jsx("span",{className:"group-hover:text-[#c3d404] transition-colors duration-300",children:"Mes Commandes"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 group-hover:w-full transition-all duration-300",style:{background:"linear-gradient(to right, #7dcf44, #c3d404)"}})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 rounded bg-[#042454] hover:bg-[#2c7494] text-white font-bold transition-colors duration-300",children:"Déconnexion"}),e.jsx("img",{src:V,alt:"IMS Logo",className:"w-8 sm:w-16 h-8 sm:h-12"})]}),e.jsx("button",{onClick:()=>i(!r),className:"md:hidden relative group","aria-label":"Toggle mobile menu",children:e.jsx("div",{className:"relative p-2 bg-blue-950 rounded leading-none",children:e.jsx("svg",{className:"w-6 h-6 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),r&&e.jsx("div",{className:"relative mt-4 md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-blue-900/50 backdrop-blur-sm rounded-lg border border-blue-500/10",children:[e.jsx(W,{to:"/professors/document_submit/",className:"block px-3 py-2 rounded-md text-base font-medium text-blue-100 hover:text-white hover:bg-blue-800/50 transition-all duration-200",children:"Formulaire de Commande"}),e.jsx(W,{to:"/professors/document_history/",className:"block px-3 py-2 rounded-md text-base font-medium text-blue-100 hover:text-white hover:bg-blue-800/50 transition-all duration-200",children:"Mes Commandes"}),e.jsx("button",{onClick:()=>{console.log("Logging out...")},className:"w-full px-3 py-2 mt-2 rounded bg-[#042454] hover:bg-[#2c7494] text-white font-bold transition-colors duration-300",children:"Logout"}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx("img",{src:V,alt:"IMS Logo",className:"w-20 sm:w-10 h-16 sm:h-10"})})]})})]})]})},Y="http://localhost:8000",je=["Direction d'Étude","Direction des Relations d'Entreprises","Recherche & Développement","Direction des Relations Internationales","Laboratoire d'Expertise et de Contrôle","Career Center","Scolarité","Administration","IT","Direction Générale"],Ne=["Informatique & Management des systèmes","Génie Industriel Logistique Internationale","Génie Industriel Textile - Habillement","Génie Industriel Chef de Produit","Génie Industriel - Tronc commun","Ingénierie des Textiles techniques et Intelligents","Chimie et traitements des matériaux","Master Spécialisé Management Produit Textile-Habillement","Master Spécialisé E-logistique","Master Spécialisé Distribution et Merchandising","Master Spécialisé Hygiène, Sécurité Et Environnement","Licence Professionnelle Développement En Habillement","Licence Professionnelle Gestion De Production En Habillement","Licence Professionnelle Gestion De Production Textile","Licence Professionnelle Gestion De La Chaine Logistique","Licence Professionnelle Gestion Achat & Sourcing","Cycle Technicien Spécialisé","RSA (Rien à signaler)"],we=["A4","A3"],ve=["Blanc/Noir","Couleurs"],Ce=["Recto","Recto-Verso"],Se=()=>{const[r,i]=t.useState({impression_pour:"",departement:"Direction d'Étude",filiere:"",n_copies:1,format:"A4",recto_verso:"Recto",couleur:"Blanc/Noir",document_file:null}),[s,c]=t.useState(""),[a,o]=t.useState(!1),[d,N]=t.useState(!0);t.useEffect(()=>{(async()=>{try{const m=await k.get(`${Y}/professors/current-professor/`,{withCredentials:!0});c(m.data.name||"Professeur Anonyme")}catch(m){console.error("Error fetching professor name:",m),c("Professeur Anonyme")}})()},[]),t.useEffect(()=>{const n=r.departement==="Direction d'Étude";o(!n),n||i(p=>({...p,filiere:"RSA (Rien à signaler)"}));const{impression_pour:m,document_file:v,filiere:g,departement:R}=r;N(!(m&&v&&(R==="Direction d'Étude"?!!g:!0)))},[r.departement,r.impression_pour,r.document_file,r.filiere]);const h=n=>{const{name:m,value:v}=n.target;i(g=>({...g,[m]:v}))},y=n=>{i(m=>({...m,document_file:n.target.files[0]}))},x=n=>{i(m=>({...m,impression_pour:n}))},w=G(),j=async n=>{var v;n.preventDefault();const m=new FormData;for(const g in r)m.append(g,r[g]);try{const g=M();if(!g)throw new Error("CSRF token not found");const R=await k.post(`${Y}/professors/document_submit/`,m,{headers:{"Content-Type":"multipart/form-data","X-CSRFToken":g},withCredentials:!0});w("/professors/document_history/",{state:{successMessage:R.data.message}})}catch(g){console.error("Error submitting document:",((v=g.response)==null?void 0:v.data)||g),alert("Erreur lors de la soumission du document.")}};return e.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[e.jsx(se,{}),e.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h2",{className:"text-center text-2xl font-bold text-blue-700 mb-6",children:"Formulaire de Commande"}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs("p",{className:"text-lg font-medium text-gray-700",children:["Professeur: ",e.jsx("span",{className:"text-blue-600",children:s})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Impression Pour:"}),e.jsx("div",{className:"flex justify-center space-x-8",children:["Examen","Cours","Document"].map(n=>e.jsx("button",{type:"button",onClick:()=>x(n),className:`px-4 py-2 rounded-lg text-sm font-medium border ${r.impression_pour===n?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"} hover:bg-blue-400 hover:text-white transition`,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Département:"}),e.jsx("select",{name:"departement",value:r.departement,onChange:h,className:"w-full p-2 border rounded-lg",children:je.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filière:"}),e.jsx("select",{name:"filiere",value:r.filiere,onChange:h,className:"w-full p-2 border rounded-lg",disabled:a,children:a?e.jsx("option",{value:"RSA (Rien à signaler)",children:"RSA (Rien à signaler)"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Sélectionnez une filière"}),Ne.map(n=>e.jsx("option",{value:n,children:n},n))]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Copies:"}),e.jsx("input",{type:"number",name:"n_copies",value:r.n_copies,onChange:h,min:1,className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format:"}),e.jsx("select",{name:"format",value:r.format,onChange:h,className:"w-full p-2 border rounded-lg",children:we.map(n=>e.jsx("option",{value:n,children:n},n))})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'impression:"}),e.jsx("select",{name:"recto_verso",value:r.recto_verso,onChange:h,className:"w-full p-2 border rounded-lg",children:Ce.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur:"}),e.jsx("select",{name:"couleur",value:r.couleur,onChange:h,className:"w-full p-2 border rounded-lg",children:ve.map(n=>e.jsx("option",{value:n,children:n},n))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Télécharger le Document:"}),e.jsx("input",{type:"file",onChange:y,className:"w-full p-2 border rounded-lg cursor-pointer"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:`w-full py-2 rounded-lg text-white font-bold ${d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"} transition`,children:"Soumettre le Document"})})]})]})})]})},ee="http://localhost:8000",_e=()=>{var E;const i=(E=ne().state)==null?void 0:E.successMessage,[s,c]=t.useState([]),[a,o]=t.useState(1),[d,N]=t.useState(""),[h,y]=t.useState(""),[x,w]=t.useState(!0),[j,n]=t.useState(1),[m,v]=t.useState(0),[g,R]=t.useState({start_date:"",end_date:""});t.useEffect(()=>{window.scrollTo(0,0)},[]);const P=async(f,O={})=>{try{w(!0);const u={page:f,...O},C=await k.get(`${ee}/professors/document_history/`,{params:u,withCredentials:!0});c(C.data.results),n(C.data.total_pages),v(C.data.total_documents)}catch(u){console.error("Error fetching documents:",u)}finally{w(!1)}};t.useEffect(()=>{P(a,g)},[a,g]);const p=()=>{const f={};d&&(f.start_date=d),h&&(f.end_date=h),o(1),R(f)},S=f=>{f>=1&&f<=j&&(o(f),window.scrollTo(0,0))},D=()=>{N(""),y(""),R({}),o(1)};return e.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[e.jsx(se,{}),e.jsx("div",{className:"w-screen",children:x?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"loader animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):e.jsxs("div",{className:"mx-auto mt-6 max-w-screen-xl px-2",children:[i&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-800 rounded-lg",children:i}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-gray-100 p-4 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 flex-shrink-0",children:"Documents Soumis"}),e.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-900",children:"Début:"}),e.jsx("input",{type:"date",id:"startDate",value:d,onChange:f=>N(f.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm w-40"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-900",children:"Fin:"}),e.jsx("input",{type:"date",id:"endDate",value:h,onChange:f=>y(f.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm w-40"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-500 transition",children:"Filtrer"}),(g.start_date||g.end_date)&&e.jsx("button",{onClick:D,className:"px-4 py-2 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-400 transition",children:"Effacer les filtres"})]})]}),e.jsx("div",{className:"mt-0 overflow-x-auto rounded-xl border shadow",children:e.jsxs("table",{className:"table-fixed border-separate border-spacing-y-2 min-w-[1200px]",children:[e.jsx("thead",{className:"border-b bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"300px"},children:"Nom du Document"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Impression Pour"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Département"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Filière"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"N. de Copies"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"80px"},children:"Format"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Recto/Verso"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Couleur"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"180px"},children:"Date Soumise"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Status"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Télécharger"})]})}),e.jsx("tbody",{children:s.length>0?s.map(f=>e.jsxs("tr",{className:"bg-white hover:bg-gray-50 transition text-center",children:[e.jsx("td",{className:"py-4 text-sm text-gray-700 truncate",style:{width:"200px"},children:f.file_name}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:f.impression_pour}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:f.get_department_abbreviation}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:f.get_filiere_abbreviation}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"120px"},children:f.n_copies}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"100px"},children:f.format}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:f.recto_verso}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"120px"},children:f.couleur}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"180px"},children:new Date(f.date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:[f.validation_impression==="en_attente"&&e.jsx("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-700 rounded-full",children:"En Attente"}),f.validation_impression==="imprimé"&&e.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-700 rounded-full",children:"Imprimé"}),f.validation_impression==="recupéré"&&e.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-700 rounded-full",children:"Récupéré"})]}),e.jsx("td",{className:"py-4 text-sm text-gray-700 text-center",style:{width:"150px"},children:e.jsx("a",{href:`${ee}/professors/download_document/${f.id}/`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-500 transition",children:"Télécharger"})})]},f.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"py-4 text-center text-sm text-gray-500",children:"Aucun document soumis pour le moment."})})})]})}),m>0&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pb-4",children:[e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>S(a-1),disabled:a===1,children:"Précédent"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",a," sur ",j]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",m," documents)"]})]}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>S(a+1),disabled:a===j,children:"Suivant"})]})]})})]})},De="http://localhost:8000",ke=()=>{const[r,i]=t.useState(!1),s=G(),c=()=>{var d;return((d=document.cookie.split("; ").find(N=>N.startsWith("csrftoken=")))==null?void 0:d.split("=")[1])||""},a=async()=>{try{const o=c();if(!o)throw new Error("CSRF token not found");const d=await k.post(`${De}/accounts/logout/`,{},{headers:{"X-CSRFToken":o},withCredentials:!0});d.data.success?s("/accounts/login/"):(console.error("Unexpected response during logout:",d.data),alert("Logout failed. Please try again."))}catch(o){console.error("Error during logout:",o),alert("An error occurred while logging out. Please try again.")}};return e.jsxs("nav",{className:"relative overflow-hidden rounded-xl border",style:{borderColor:"#b0cbd4"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to right, #04527a, #2c7494)",backdropFilter:"blur(10px)"}}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute h-4 w-4 rounded-full bg-[#c3d404]/20 animate-float top-4 left-[10%]"}),e.jsx("div",{className:"absolute h-3 w-3 rounded-full bg-[#7dcf44]/20 animate-float top-8 left-[20%] [animation-delay:0.5s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#407c9c]/20 animate-float top-6 left-[50%] [animation-delay:1s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#78a8bc]/20 animate-float top-2 left-[60%] [animation-delay:1.5s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#04527a]/20 animate-float top-10 left-[15%] [animation-delay:0.8s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#2c7494]/20 animate-float top-16 left-[70%] [animation-delay:1.2s]"}),e.jsx("div",{className:"absolute h-3 w-3 rounded-full bg-[#b0cbd4]/20 animate-float top-12 left-[30%] [animation-delay:0.4s]"}),e.jsx("div",{className:"absolute h-4 w-4 rounded-full bg-[#346e8e]/20 animate-float top-6 left-[85%] [animation-delay:0.7s]"}),e.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-[#042454]/20 animate-float top-14 left-[80%] [animation-delay:1.4s]"}),e.jsx("div",{className:"absolute h-5 w-5 rounded-full bg-[#043261]/20 animate-float top-4 left-[40%] [animation-delay:1s]"})]}),e.jsxs("div",{className:"relative px-4 sm:px-8 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-10 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-lg blur-md group-hover:blur-xl transition-all duration-300",style:{background:"linear-gradient(to right, #c3d404, #7dcf44)"}}),e.jsx("img",{src:H,alt:"Logo Esith",className:"relative w-8 sm:w-16 h-8 sm:h-10 transform group-hover:scale-110 transition-transform duration-300"})]}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:"Portail Centre De Copie"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-10",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded bg-[#042454] hover:bg-[#2c7494] text-white font-bold transition-colors duration-300",children:"Déconnexion"}),e.jsx("img",{src:V,alt:"IMS Logo",className:"w-8 sm:w-16 h-8 sm:h-12"})]}),e.jsx("button",{onClick:()=>i(!r),className:"md:hidden relative group","aria-label":"Toggle mobile menu",children:e.jsx("div",{className:"relative p-2 bg-blue-950 rounded leading-none",children:e.jsx("svg",{className:"w-6 h-6 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),r&&e.jsx("div",{className:"relative mt-4 md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-blue-900/50 backdrop-blur-sm rounded-lg border border-blue-500/10",children:[e.jsx("button",{onClick:()=>{console.log("Logging out...")},className:"w-full px-3 py-2 mt-2 rounded bg-[#042454] hover:bg-[#2c7494] text-white font-bold transition-colors duration-300",children:"Logout"}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx("img",{src:V,alt:"IMS Logo",className:"w-20 sm:w-10 h-16 sm:h-10"})})]})})]})]})},q="http://localhost:8000",Pe=()=>{const[r,i]=t.useState([]),[s,c]=t.useState([]),[a,o]=t.useState(""),[d,N]=t.useState(""),[h,y]=t.useState(""),[x,w]=t.useState(""),[j,n]=t.useState(!0),[m,v]=t.useState([]),[g,R]=t.useState(1),[P,p]=t.useState({}),[S,D]=t.useState(1),E=async(l=1,b={})=>{try{n(!0);const _=b.endDate?new Date(b.endDate):null;_&&_.setDate(_.getDate()+1);const T=new URLSearchParams({page:l,...b.searchQuery&&{search_query:b.searchQuery},...b.startDate&&{date_from:b.startDate},..._&&{date_to:_.toISOString().split("T")[0]},...b.status&&{status:b.status}}),A=await k.get(`${q}/agent/dashboard/?${T.toString()}`,{withCredentials:!0});i(A.data.documents),c(A.data.documents),R(A.data.current_page),D(A.data.total_pages)}catch(_){console.error("Error fetching documents:",_)}finally{n(!1)}};t.useEffect(()=>{E()},[]);const f=async l=>{const b=l.target.value.trim();if(o(b),!b){v([]);return}try{const _=await k.get(`${q}/agent/search_professor/?q=${encodeURIComponent(b)}`,{withCredentials:!0});v(_.data)}catch(_){console.error("Error fetching professor suggestions:",_)}},O=l=>{o(l.email),v([])},u=()=>{E(1,{searchQuery:a,startDate:d,endDate:h,status:x})},C=l=>{E(l,{searchQuery:a,startDate:d,endDate:h,status:x})},L=async l=>{p(b=>({...b,[l]:!0}));try{const b=M();await k.post(`${q}/agent/mark_as_printed/${l}/`,{},{withCredentials:!0,headers:{"X-CSRFToken":b}}),i(_=>_.map(T=>T.id===l?{...T,status:"Imprimé"}:T)),c(_=>_.map(T=>T.id===l?{...T,status:"Imprimé"}:T))}catch(b){console.error("Erreur lors de l'envoi de l'email:",b)}finally{p(b=>({...b,[l]:!1}))}},[X,U]=t.useState({}),re=(l,b)=>{U(_=>({..._,[b]:l.target.value}))},ae=async l=>{p(b=>({...b,[l]:!0}));try{const b=M(),_=X[l];(await k.post(`${q}/agent/validate_and_mark_recupere/${l}/`,{code:_},{withCredentials:!0,headers:{"X-CSRFToken":b}})).data.success?(i(A=>A.map(I=>I.id===l?{...I,status:"Recupéré"}:I)),c(A=>A.map(I=>I.id===l?{...I,status:"Recupéré"}:I))):alert("Code invalide, veuillez réessayer.")}catch(b){console.error("Erreur lors de la validation du code:",b)}finally{p(b=>({...b,[l]:!1}))}};return e.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[e.jsx(ke,{}),e.jsx("div",{className:"w-screen",children:j?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"loader animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):e.jsxs("div",{className:"mx-auto mt-6 max-w-screen-xl px-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-gray-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-auto",children:[e.jsx("label",{htmlFor:"professorSearch",className:"text-sm font-medium text-gray-900",children:"Rechercher les documents d'un professeur :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"professorSearch",value:a,onChange:f,placeholder:"Entrer le nom du professeur...",autoComplete:"off",className:"p-2 border border-gray-300 rounded-lg text-sm w-80"}),m.length>0&&e.jsx("ul",{className:"absolute z-10 bg-white border border-gray-300 rounded-lg mt-1 max-h-40 overflow-y-auto w-full",children:m.map(l=>e.jsxs("li",{onClick:()=>O(l),className:"px-4 py-2 cursor-pointer hover:bg-gray-200",children:[l.first_name," ",l.last_name," (",l.email,")"]},l.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-900",children:"Date de Début:"}),e.jsx("input",{type:"date",id:"startDate",value:d,onChange:l=>N(l.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-900",children:"Date de Fin:"}),e.jsx("input",{type:"date",id:"endDate",value:h,onChange:l=>y(l.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium text-gray-900",children:"Status:"}),e.jsxs("select",{id:"status",value:x,onChange:l=>w(l.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"en_attente",children:"En attente"}),e.jsx("option",{value:"imprimé",children:"Imprimé"}),e.jsx("option",{value:"recupéré",children:"Récupéré"})]})]})]}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-500 transition",children:"Rechercher"})]}),e.jsx("div",{className:"mt-2 overflow-x-auto rounded-xl border shadow",children:e.jsxs("table",{className:"table-fixed border-separate border-spacing-y-2 min-w-[1200px]",children:[e.jsx("thead",{className:"border-b bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"Nom du Document"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"200px"},children:"Professeur"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"70px"},children:"Impression Pour"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"70px"},children:"Département"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Filière"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"N. de Copies"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"100px"},children:"Format"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"Recto/Verso"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Couleur"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Date Soumise"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Status"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Télécharger"})]})}),e.jsx("tbody",{children:s.length>0?s.map(l=>e.jsxs("tr",{className:"bg-white hover:bg-gray-50 transition text-center",children:[e.jsx("td",{className:"py-4 text-sm text-gray-700 truncate",style:{width:"50px"},children:l.file_name}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"200px"},children:l.professeur}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:l.impression_pour}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:l.departement}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"120px"},children:l.filiere}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:l.n_copies}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"100px"},children:l.format}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:l.recto_verso}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:l.couleur}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:new Date(l.date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:[l.status==="En attente"&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("button",{className:`px-3 py-1 rounded-md w-full mb-2 ${P[l.id]?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,onClick:()=>L(l.id),disabled:P[l.id],children:P[l.id]?"Envoi...":"Imprimé"})}),l.status==="Imprimé"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"text",placeholder:"Entrer le code",className:"p-1 border border-gray-300 rounded-md text-sm mb-2 w-full",onChange:b=>re(b,l.id)}),e.jsx("button",{className:`px-3 py-1 rounded-md w-full ${P[l.id]?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-500 text-white"}`,onClick:()=>ae(l.id),disabled:P[l.id],children:P[l.id]?"Validation...":"Récupéré"})]}),l.status==="Recupéré"&&e.jsx("div",{className:"text-center",children:e.jsx("span",{children:"Récupéré"})})]}),e.jsx("td",{className:"py-4 text-sm text-gray-700 text-center",style:{width:"120px"},children:e.jsx("a",{href:`${q}/professors/download_document/${l.id}/`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-500 transition",children:"Télécharger"})})]},l.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"py-4 text-center text-gray-500",children:"Aucun document trouvé."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>C(g-1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:g===1,children:"Précédent"}),e.jsxs("p",{children:["Page ",g," sur ",S]}),e.jsx("button",{onClick:()=>C(g+1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:g===S,children:"Suivant"})]})]})})]})},Re="/assets/dashboard-icon-HNwlBDJs.png",Ee="/assets/historique-icon-CxhYN25-.png",Le="/assets/professors-icon-CKV64eFQ.png",Fe="/assets/add-professor-icon-87WhhdHD.png",Te="http://localhost:8000",Ae=()=>{const r=G(),i=async()=>{try{const s=M();if(!s)throw new Error("CSRF token not found");const c=await k.post(`${Te}/accounts/logout/`,{},{headers:{"X-CSRFToken":s},withCredentials:!0});c.data.success?r("/accounts/login/"):(console.error("Unexpected response during logout:",c.data),alert("Logout failed. Please try again."))}catch(s){console.error("Error during logout:",s),alert("An error occurred while logging out. Please try again.")}};return e.jsxs("div",{className:"w-64 min-h-screen bg-gray-700 text-white flex flex-col z-10 relative",children:[e.jsx("div",{className:"mt-10 flex flex-col items-center",children:e.jsx("img",{src:H,alt:"Logo Esith",className:"w-22 h-20"})}),e.jsxs("ul",{className:"mt-3 space-y-3",children:[e.jsx("li",{children:e.jsxs(z,{to:"/direction/dashboard/",className:({isActive:s})=>`relative flex items-center space-x-2 rounded-md py-4 px-10 cursor-pointer ${s?"bg-slate-600 text-white":"text-gray-300 hover:bg-slate-600"}`,children:[e.jsx("img",{src:Re,alt:"Dashboard Icon",className:"w-10 h-10"}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs(z,{to:"/direction/direction_history/",className:({isActive:s})=>`relative flex items-center space-x-2 rounded-md py-4 px-10 cursor-pointer ${s?"bg-slate-600 text-white":"text-gray-300 hover:bg-slate-600"}`,children:[e.jsx("img",{src:Ee,alt:"Historique Icon",className:"w-10 h-10"}),e.jsx("span",{children:"Historique des Commandes"})]})}),e.jsx("li",{children:e.jsxs(z,{to:"/direction/professors_list/",className:({isActive:s})=>`relative flex items-center space-x-2 rounded-md py-4 px-10 cursor-pointer ${s?"bg-slate-600 text-white":"text-gray-300 hover:bg-slate-600"}`,children:[e.jsx("img",{src:Le,alt:"Professors Icon",className:"w-10 h-10"}),e.jsx("span",{children:"Liste des Professeurs"})]})}),e.jsx("li",{children:e.jsxs(z,{to:"/direction/add_professor/",className:({isActive:s})=>`relative flex items-center space-x-2 rounded-md py-4 px-10 cursor-pointer ${s?"bg-slate-600 text-white":"text-gray-300 hover:bg-slate-600"}`,children:[e.jsx("img",{src:Fe,alt:"Add Professor Icon",className:"w-8 h-8"}),e.jsx("span",{children:"Ajouter un Professeur"})]})})]}),e.jsx("div",{className:"my-6 mt-auto ml-10",children:e.jsx("button",{className:"flex items-center space-x-2 rounded-md py-4 px-10 bg-red-500 text-white hover:bg-red-600",onClick:i,children:e.jsx("span",{children:"Se Déconnecter"})})})]})},Q=({children:r,pageTitle:i})=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"fixed top-0 left-0 h-screen",children:e.jsx(Ae,{})}),e.jsxs("div",{className:"flex-1 ml-64 min-h-screen",children:[" ",e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-gray-100 p-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-700 ml-20",children:i}),e.jsx("img",{src:V,alt:"IMS Logo",className:"h-12"})]}),e.jsx("div",{className:"p-4",children:r})]})]}),Ie=()=>{const r=t.useRef(null),i=t.useRef(null),s=t.useRef(null),c=t.useRef(null),a=t.useRef(null),o=t.useRef(null);return t.useEffect(()=>{const d=[],N=new B(r.current,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Commandes 2024",data:[30,50,40,70,90,120,150,140,130,110,80,60],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4,fill:!0},{label:"Commandes 2023",data:[20,40,30,60,80,100,130,120,100,90,70,50],borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4,fill:!0}]},options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{title:{display:!0,text:"Mois"}},y:{title:{display:!0,text:"Nombre de Commandes"},beginAtZero:!0}}}});d.push(N);const h=new B(i.current,{type:"bar",data:{labels:["DE","DRE","R&D","DRI","LEC","CC","Scolarité (SC)","Administration (ADM)","IT","Direction Générale (DG)"],datasets:[{label:"Commandes",data:[30,40,20,50,10,25,35,15,45,20],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Départements"}},y:{beginAtZero:!0,title:{display:!0,text:"Nombre de Commandes"}}}}});d.push(h);const y=new B(s.current,{type:"bar",data:{labels:["IMS","GI-LI","GI-TH","GI-CP","GI-TC","ITTI","CTM","MS-MPTH","MS-E-Log","MS-DM","MS-HSE","LP-DH","LP-GPH","LP-GPT","LP-GCL","LP-GAS","CTS","RSA"],datasets:[{label:"Commandes",data:[15,25,35,20,30,40,10,50,45,25,30,20,15,35,25,30,10,5],backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Filières"}},y:{beginAtZero:!0,title:{display:!0,text:"Nombre de Commandes"}}}}});d.push(y);const x=new B(c.current,{type:"pie",data:{labels:["Recto","Recto-Verso"],datasets:[{data:[60,40],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"}}}});d.push(x);const w=new B(a.current,{type:"pie",data:{labels:["Couleur","Noir et Blanc"],datasets:[{data:[30,70],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"}}}});d.push(w);const j=new B(o.current,{type:"bar",data:{labels:["Recto","Recto-Verso"],datasets:[{label:"Couleur",data:[20,10],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1},{label:"Noir et Blanc",data:[40,30],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{stacked:!0,title:{display:!0,text:"Type d'Impression"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Nombre de Copies"}}}}});return d.push(j),()=>{d.forEach(n=>n.destroy())}},[]),e.jsx(Q,{pageTitle:"Dashboard des Commandes",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"Total Commandes"}),e.jsx("div",{className:"text-3xl font-bold",children:"769"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"En Attente"}),e.jsx("div",{className:"text-3xl font-bold",children:"20"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"Validées"}),e.jsx("div",{className:"text-3xl font-bold",children:"749"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Courbe de Tendance : Évolution des Commandes"}),e.jsx("canvas",{ref:r})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Commandes par Département"}),e.jsx("canvas",{ref:i})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Commandes par Filière"}),e.jsx("canvas",{ref:s})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Répartition par Type d'Impression"}),e.jsx("canvas",{ref:c})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Répartition par Couleur"}),e.jsx("canvas",{ref:a})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Comparaison : Impression et Couleur"}),e.jsx("canvas",{ref:o})]})]})]})})},te="http://localhost:8000",$e=()=>{const[r,i]=t.useState([]),[s,c]=t.useState([]),[a,o]=t.useState(""),[d,N]=t.useState(""),[h,y]=t.useState(""),[x,w]=t.useState(""),[j,n]=t.useState(!0),[m,v]=t.useState([]),[g,R]=t.useState(1),[P,p]=t.useState(1),S=async(u=1,C={})=>{try{n(!0);const L=C.endDate?new Date(C.endDate):null;L&&L.setDate(L.getDate()+1);const X=new URLSearchParams({page:u,...C.searchQuery&&{search_query:C.searchQuery},...C.startDate&&{date_from:C.startDate},...L&&{date_to:L.toISOString().split("T")[0]},...C.status&&{status:C.status}}),U=await k.get(`${te}/direction/direction_history/?${X.toString()}`,{withCredentials:!0});i(U.data.documents),c(U.data.documents),R(U.data.current_page),p(U.data.total_pages)}catch(L){console.error("Error fetching documents:",L)}finally{n(!1)}};t.useEffect(()=>{S()},[]);const D=async u=>{const C=u.target.value.trim();if(o(C),!C){v([]);return}try{const L=await k.get(`${te}/direction/search_professor/?q=${encodeURIComponent(C)}`,{withCredentials:!0});v(L.data)}catch(L){console.error("Error fetching professor suggestions:",L)}},E=u=>{o(u.email),v([])},f=()=>{S(1,{searchQuery:a,startDate:d,endDate:h,status:x})},O=u=>{S(u,{searchQuery:a,startDate:d,endDate:h,status:x})};return e.jsx(Q,{pageTitle:"Historique des Documents",children:e.jsx("div",{className:"bg-gray-100 min-h-screen",children:j?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"loader animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):e.jsxs("div",{className:"mx-auto mt-6 max-w-screen-xl px-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-gray-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-auto",children:[e.jsx("label",{htmlFor:"professorSearch",className:"text-sm font-medium text-gray-900",children:"Rechercher les documents d'un professeur :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"professorSearch",value:a,onChange:D,placeholder:"Entrer le nom du professeur...",autoComplete:"off",className:"p-2 border border-gray-300 rounded-lg text-sm w-80"}),m.length>0&&e.jsx("ul",{className:"absolute z-10 bg-white border border-gray-300 rounded-lg mt-1 max-h-40 overflow-y-auto w-full",children:m.map(u=>e.jsxs("li",{onClick:()=>E(u),className:"px-4 py-2 cursor-pointer hover:bg-gray-200",children:[u.first_name," ",u.last_name," (",u.email,")"]},u.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-900",children:"Date de Début:"}),e.jsx("input",{type:"date",id:"startDate",value:d,onChange:u=>N(u.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-900",children:"Date de Fin:"}),e.jsx("input",{type:"date",id:"endDate",value:h,onChange:u=>y(u.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium text-gray-900",children:"Status:"}),e.jsxs("select",{id:"status",value:x,onChange:u=>w(u.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"en_attente",children:"En attente"}),e.jsx("option",{value:"imprimé",children:"Imprimé"}),e.jsx("option",{value:"recupéré",children:"Récupéré"})]})]})]}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-500 transition",children:"Rechercher"})]}),e.jsx("div",{className:"mt-2 overflow-x-auto rounded-xl border shadow",children:e.jsxs("table",{className:"table-fixed border-separate border-spacing-y-2 min-w-[1200px]",children:[e.jsx("thead",{className:"border-b bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"Nom du Document"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"200px"},children:"Professeur"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"70px"},children:"Impression Pour"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"70px"},children:"Département"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Filière"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"N. de Copies"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"100px"},children:"Format"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"50px"},children:"Recto/Verso"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Couleur"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"120px"},children:"Date Soumise"}),e.jsx("td",{className:"py-4 text-sm font-medium text-gray-500 text-center",style:{width:"150px"},children:"Status"})]})}),e.jsx("tbody",{children:s.length>0?s.map(u=>e.jsxs("tr",{className:"bg-white hover:bg-gray-50 transition text-center",children:[e.jsx("td",{className:"py-4 text-sm text-gray-700 truncate",style:{width:"50px"},children:u.file_name}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"200px"},children:u.professeur}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:u.impression_pour}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:u.departement}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"120px"},children:u.filiere}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:u.n_copies}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"100px"},children:u.format}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"50px"},children:u.recto_verso}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:u.couleur}),e.jsx("td",{className:"py-4 text-sm text-gray-700",style:{width:"70px"},children:new Date(u.date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"py-4 text-sm text-gray-700",style:{width:"150px"},children:[u.status==="En attente"&&e.jsx("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-700 rounded-full",children:"En Attente"}),u.status==="Imprimé"&&e.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-700 rounded-full",children:"Imprimé"}),u.status==="Recupéré"&&e.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-700 rounded-full",children:"Récupéré"})]})]},u.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"py-4 text-center text-gray-500",children:"Aucun document trouvé."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>O(g-1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:g===1,children:"Précédent"}),e.jsxs("p",{children:["Page ",g," sur ",P]}),e.jsx("button",{onClick:()=>O(g+1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:g===P,children:"Suivant"})]})]})})})},J="http://localhost:8000",Me=()=>{const[r,i]=t.useState([]),[s,c]=t.useState(""),[a,o]=t.useState([]),[d,N]=t.useState([]),[h,y]=t.useState(!1),[x,w]=t.useState(1),[j,n]=t.useState(1),m=async(p=1,S="")=>{try{y(!0);const D=new URLSearchParams({page:p,...S&&{search_query:S}}),E=await k.get(`${J}/direction/professors_list/?${D.toString()}`,{withCredentials:!0});i(E.data.professors),o(E.data.professors),w(E.data.current_page),n(E.data.total_pages)}catch(D){console.error("Error fetching professors:",D)}finally{y(!1)}};t.useEffect(()=>{m()},[]);const v=async p=>{const S=p.target.value.trim();if(c(S),!S){N([]),m(1);return}try{const D=await k.get(`${J}/direction/professors_list/?search_query=${encodeURIComponent(S)}`,{withCredentials:!0});N(D.data.professors)}catch(D){console.error("Error fetching professor suggestions:",D)}},g=p=>{c(`${p.first_name} ${p.last_name}`),N([]),m(1,p.email)},R=p=>{m(p,s)},P=async p=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce professeur ?"))try{const D=M();await k.delete(`${J}/direction/delete_professor/${p}/`,{withCredentials:!0,headers:{"X-CSRFToken":D}}),m(x,s),alert("Professeur supprimé avec succès.")}catch(D){console.error("Erreur lors de la suppression du professeur :",D),alert("Une erreur s'est produite. Veuillez réessayer.")}};return e.jsxs(Q,{pageTitle:"Liste des Professeurs",children:[e.jsx("div",{className:"mx-auto max-w-screen-lg px-4 py-5 sm:px-8",children:e.jsxs("div",{className:"flex items-center justify-between pb-0",children:[e.jsxs("div",{className:"relative w-full md:w-1/2",children:[e.jsx("input",{type:"text",value:s,onChange:v,placeholder:"Entrer le nom ou l'email du professeur...",className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoComplete:"off"}),d.length>0&&e.jsx("ul",{className:"absolute z-10 bg-white border rounded-lg mt-1 max-h-40 overflow-y-auto w-full",children:d.map(p=>e.jsxs("li",{onClick:()=>g(p),className:"px-4 py-2 cursor-pointer hover:bg-gray-200",children:[p.first_name," ",p.last_name," (",p.email,")"]},p.id))})]}),e.jsx("button",{onClick:()=>m(1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:"Réinitialiser"})]})}),e.jsx("div",{className:"overflow-y-hidden rounded-lg border",children:e.jsxs("table",{className:"table-auto w-full border-collapse bg-white",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"#"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Nom Complet"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Email"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Suppression"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-4",children:"Chargement..."})}):a.length>0?a.map((p,S)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:S+1}),e.jsxs("td",{className:"px-4 py-2",children:[p.first_name," ",p.last_name]}),e.jsx("td",{className:"px-4 py-2",children:p.email}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>P(p.id),className:"px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Supprimer"})})]},p.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-4",children:"Aucun professeur trouvé."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>R(x-1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:x===1,children:"Précédent"}),e.jsxs("p",{children:["Page ",x," sur ",j]}),e.jsx("button",{onClick:()=>R(x+1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:bg-gray-100",disabled:x===j,children:"Suivant"})]})]})},Oe="http://localhost:8000",Ue=()=>{const[r,i]=t.useState({firstName:"",lastName:"",email:""}),[s,c]=t.useState({}),[a,o]=t.useState(""),d=h=>{const{name:y,value:x}=h.target;i({...r,[y]:x})},N=async h=>{h.preventDefault(),c({}),o("");try{const y=M(),x=await k.post(`${Oe}/direction/add_professor/`,{first_name:r.firstName,last_name:r.lastName,email:r.email},{withCredentials:!0,headers:{"X-CSRFToken":y}});o("Professeur ajouté avec succès !"),i({firstName:"",lastName:"",email:""})}catch(y){if(console.error("Error adding professor:",y),y.response&&y.response.data.errors){const x=y.response.data.errors,w={};Object.keys(x).forEach(j=>{w[j]=x[j].join(", ")}),c(w)}else c({global:"Une erreur s'est produite. Veuillez réessayer."})}};return e.jsx(Q,{pageTitle:"Ajouter un Professeur",children:e.jsxs("div",{className:"container mx-auto mt-10 max-w-3xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Ajouter un Professeur"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Veuillez remplir le formulaire ci-dessous pour ajouter un nouveau professeur."})]}),a&&e.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-3 rounded mb-6",children:a}),s.global&&e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-3 rounded mb-6",children:s.global}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 border-b pb-4 mb-6",children:"Formulaire de Création"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"Prénom"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,autoComplete:"off",onChange:d,className:`mt-2 block w-full rounded-lg shadow-md border ${s.first_name?"border-red-500":"border-gray-300"} focus:ring-blue-500 focus:border-blue-500 px-4 py-3 text-lg`,placeholder:"Entrez le prénom"}),s.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Nom"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,autoComplete:"off",onChange:d,className:`mt-2 block w-full rounded-lg shadow-md border ${s.last_name?"border-red-500":"border-gray-300"} focus:ring-blue-500 focus:border-blue-500 px-4 py-3 text-lg`,placeholder:"Entrez le nom"}),s.last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.last_name})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,autoComplete:"off",onChange:d,className:`mt-2 block w-full rounded-lg shadow-md border ${s.email?"border-red-500":"border-gray-300"} focus:ring-blue-500 focus:border-blue-500 px-4 py-3 text-lg`,placeholder:"exemple@domain.com"}),s.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 text-lg",children:"Ajouter"})})]})]})]})})},Be=()=>{try{const r=localStorage.getItem("user");return r?JSON.parse(r):null}catch(r){return console.error("Error parsing user data:",r),null}},$=({element:r,allowedRole:i})=>{const s=Be(),c=s==null?void 0:s.isAuthenticated,a=(s==null?void 0:s.role)===i;return c?i&&!a?e.jsx(Z,{to:"/accounts/login/",replace:!0}):r:e.jsx(Z,{to:"/accounts/login/",replace:!0})},Ve=()=>e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(F,{path:"/accounts/login/",element:e.jsx(he,{})}),e.jsx(F,{path:"/accounts/password_reset/",element:e.jsx(ge,{})}),e.jsx(F,{path:"/accounts/password_reset_confirm/:uid/:token/",element:e.jsx(fe,{})}),e.jsx(F,{path:"/professors/document_submit/",element:e.jsx($,{element:e.jsx(Se,{}),allowedRole:"professor"})}),e.jsx(F,{path:"/professors/document_history/",element:e.jsx($,{element:e.jsx(_e,{}),allowedRole:"professor"})}),e.jsx(F,{path:"/agent/dashboard/",element:e.jsx($,{element:e.jsx(Pe,{}),allowedRole:"agent"})}),e.jsx(F,{path:"/direction/dashboard/",element:e.jsx($,{element:e.jsx(Ie,{}),allowedRole:"direction"})}),e.jsx(F,{path:"/direction/direction_history/",element:e.jsx($,{element:e.jsx($e,{}),allowedRole:"direction"})}),e.jsx(F,{path:"/direction/professors_list/",element:e.jsx($,{element:e.jsx(Me,{}),allowedRole:"direction"})}),e.jsx(F,{path:"/direction/add_professor/",element:e.jsx($,{element:e.jsx(Ue,{}),allowedRole:"direction"})}),e.jsx(F,{path:"*",element:e.jsx(Z,{to:"/accounts/login/",replace:!0})})]})});de.createRoot(document.getElementById("root")).render(e.jsx(ce.StrictMode,{children:e.jsx(Ve,{})}));
